<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/material-design-icons/3.0.1/iconfont/material-icons.min.css">
  <link rel="stylesheet" href="QnABot.css">
</head>

<body>

<h2>Popup Chat Window</h2>
<p>Click on the button at the bottom of this page to open the chat form.</p>
<p>Note that the button and the form is fixed - they will always be positioned to the bottom of the browser window.</p>

<!--Chat button-->
<button class="chat-button" onclick="openChat()" id="chat-btn">
  <i class="material-icons"> comment </i>
</button>


<!--Chat container with chat bot interface inside-->
<div class="chat-container" id="myChat">
  <div class="header-bar">
    <p class="header">Chat with us!</p>
  </div>
  

  <iframe id='iframe1'
    src='https://webchat.botframework.com/embed/PH2019TestWebBot?s=A1Ayq9Ruh4E.3lR0dkyD3zZJb087fL9k7M5ZnRBuWxFk__v8hSEJAx4'
    style='min-width: 425px; width: 50%; min-height: 500px;'
    title="Project Hosts Chat Bot">
  </iframe>

<!--Buttons to minimize, maximize, and close-->
  <span class="buttons">
      <div class="min" onclick="minimizeChat()">_</div>
      <div class="max" onclick="maximizeChat()">+</div>
      <div class="close" onclick="closeChat()">x</div>
  </span>
 
  <p class="footer">Powered by Azure Bot Services</p>
</div>


<!--Set chat container and button displays on click-->
<script>
  
function openChat() {
  document.getElementById("myChat").style.display = "block";
  document.getElementById("chat-btn").style.display = "none";
}

function minimizeChat() {
  document.getElementById("myChat").style.display = "none";
  document.getElementById("chat-btn").style.display = "block";
  document.getElementById('iframe1').style.height = "500px"
}

function maximizeChat(){
  document.getElementById('iframe1').style.height = "700px"
  /*var divText = document.getElementById("myChat").outerHTML;
  var myWindow = window.open('','','width=900,height=1050');
  var doc = myWindow.document;
  doc.open();
  doc.write('<link rel="stylesheet" href="QnABot.css">')
  doc.write(divText);
  doc.close();
  var iframe = $("#iframe1"); 
  var newWindow = window.open(iframe.attr(src), 'Dynamic Popup', 'height=' + iframe.height() + ', width=' + iframe.width() + 'scrollbars=auto, resizable=no, location=no, status=no');
  newWindow.document.write(iframe[0].outerHTML);
  newWindow.document.close();
  iframe[0].outerHTML = ''; // to remove iframe in page.*/
}

function closeChat() {
  document.getElementById("myChat").style.display = "none";
  document.getElementById("chat-btn").style.display = "none";
}


</script>

</body>
</html>
